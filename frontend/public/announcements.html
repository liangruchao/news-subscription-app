<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³»ç»Ÿå…¬å‘Š - æ–°é—»è®¢é˜…ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/announcements.css">
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <header>
            <h1>æ–°é—»è®¢é˜…ç³»ç»Ÿ</h1>
            <nav class="nav-menu">
                <a href="index.html">é¦–é¡µ</a>
                <a href="profile.html">ä¸ªäººä¸­å¿ƒ</a>
                <a href="messages.html">æ¶ˆæ¯<span id="messageBadge" class="badge"></span></a>
                <a href="announcements.html" class="active">å…¬å‘Š</a>
                <a href="preferences.html">è®¾ç½®</a>
                <a href="#" onclick="logout()">é€€å‡º</a>
            </nav>
        </header>

        <!-- ä¸»è¦å†…å®¹ -->
        <main class="announcements-main">
            <!-- å…¬å‘Šåˆ—è¡¨ -->
            <div id="announcementsList" class="announcements-list">
                <!-- åŠ¨æ€åŠ è½½å…¬å‘Š -->
            </div>

            <!-- ç©ºçŠ¶æ€ -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <div class="empty-icon">ğŸ“¢</div>
                <p>æš‚æ— å…¬å‘Š</p>
            </div>
        </main>

        <!-- å…¬å‘Šè¯¦æƒ…æ¨¡æ€æ¡† -->
        <div id="announcementModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">å…¬å‘Šè¯¦æƒ…</h2>
                    <button class="modal-close" onclick="closeAnnouncementModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="announcement-meta">
                        <span id="modalPriority" class="announcement-priority"></span>
                        <span id="modalTime" class="announcement-time"></span>
                    </div>
                    <div id="modalContent" class="announcement-content"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeAnnouncementModal()">å…³é—­</button>
                </div>
            </div>
        </div>

        <!-- é¡µè„š -->
        <footer>
            <p>&copy; 2025 æ–°é—»è®¢é˜…ç³»ç»Ÿ | Powered by NewsAPI</p>
        </footer>
    </div>

    <script src="/js/api.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/announcements.js"></script>
    <script>
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            if (!isLoggedIn()) {
                window.location.href = 'login.html';
                return;
            }
            loadAnnouncements();
            updateMessageBadge();
        };
    </script>
</body>
</html>
